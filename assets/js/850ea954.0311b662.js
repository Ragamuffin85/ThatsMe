"use strict";(self.webpackChunkthats_me=self.webpackChunkthats_me||[]).push([[7418],{1815:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"HowTo/Proxmox/HddPassthrough","title":"HDD Passthrough","description":"Requirements","source":"@site/docs/HowTo/Proxmox/HddPassthrough.mdx","sourceDirName":"HowTo/Proxmox","slug":"/HowTo/Proxmox/HddPassthrough","permalink":"/ThatsMe/docs/HowTo/Proxmox/HddPassthrough","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"HDD Passthrough","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"PCI Passthrough","permalink":"/ThatsMe/docs/HowTo/Proxmox/PciPassthrough"},"next":{"title":"Reference","permalink":"/ThatsMe/docs/category/reference"}}');var n=i(4848),r=i(8453);const a={title:"HDD Passthrough",sidebar_position:2},d="Passthrough a Physical HDD to a in Proxmox VE Virtual Machine",o={},l=[{value:"Requirements",id:"requirements",level:2},{value:"Configure Proxmox",id:"configure-proxmox",level:2},{value:"Identify the Drives UID",id:"identify-the-drives-uid",level:3},{value:"Identify the Drives Full Name",id:"identify-the-drives-full-name",level:3},{value:"Create the Drives Full Path",id:"create-the-drives-full-path",level:3},{value:"Add the Drive to your Virtual Machine",id:"add-the-drive-to-your-virtual-machine",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"passthrough-a-physical-hdd-to-a-in-proxmox-ve-virtual-machine",children:"Passthrough a Physical HDD to a in Proxmox VE Virtual Machine"})}),"\n",(0,n.jsx)(t.h2,{id:"requirements",children:"Requirements"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Installed harddrives in your proxmox Machine"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"configure-proxmox",children:"Configure Proxmox"}),"\n",(0,n.jsx)(t.p,{children:"To passthrough a physical HDD there are two essencial steps"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Identify the HDD that should be passed"}),"\n",(0,n.jsx)(t.li,{children:"Add the HDD to the virtual machine"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"identify-the-drives-uid",children:"Identify the Drives UID"}),"\n",(0,n.jsxs)(t.p,{children:["There are several ways to identify the drives and their unique IDs.\nThe one that works out of the box is by applying the command ",(0,n.jsx)(t.code,{children:"lsblk -o +MODEL,SERIAL"})]}),"\n",(0,n.jsx)(t.p,{children:"Doing it like this, you will receive a list of all your detected drives"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"\nroot@pve:~# lsblk -o +MODEL,SERIAL\n...\nNAME                         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS     MODEL                SERIAL\nsda                            8:0    0   3.6T  0 disk                 WDC WD40EFPX-68C6CN0 WD-XXXXXXXXXXX1\n\u251c\u2500sda1                         8:1    0     2G  0 part\n\u2514\u2500sda2                         8:2    0   3.6T  0 part\nsdb                            8:16   0   3.6T  0 disk                 WDC WD40EFPX-68C6CN0 WD-XXXXXXXXXXX2\n\u251c\u2500sdb1                         8:17   0     2G  0 part\n\u2514\u2500sdb2                         8:18   0   3.6T  0 part\n...\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The essential part in the shown table is the column ",(0,n.jsx)(t.code,{children:"SERIAL"})," - This serial is used to identify the HDD."]}),"\n",(0,n.jsx)(t.h3,{id:"identify-the-drives-full-name",children:"Identify the Drives Full Name"}),"\n",(0,n.jsx)(t.p,{children:"Now that you know which drives are available and how to identify them, you can check the full name."}),"\n",(0,n.jsxs)(t.p,{children:["All the drives and their full-names can be found in the directory ",(0,n.jsx)(t.code,{children:"/dev/disk/by-id"})," - So just list them all with the command ",(0,n.jsx)(t.code,{children:"ls /dev/disk/by-id/"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"root@pve:~# ls /dev/disk/by-id/\n...\nata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX1\nata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX1-part1\nata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX1-part2\nata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX2\nata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX2-part1\nata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX2-part2\n...\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Maybe you noticed the last part of the drives names is the same as the one listed in the initial tables ",(0,n.jsx)(t.code,{children:"SERIAL"})," column"]}),"\n",(0,n.jsx)(t.h3,{id:"create-the-drives-full-path",children:"Create the Drives Full Path"}),"\n",(0,n.jsx)(t.p,{children:"The hardest part is already done.\nYou identified your drives UID and its corresponding full name."}),"\n",(0,n.jsx)(t.p,{children:"We already talked about the path, where to find the drives UIDs."}),"\n",(0,n.jsxs)(t.p,{children:["Alltogether this information allows us to create the full-path which is ",(0,n.jsx)(t.code,{children:"path + fullname"})]}),"\n",(0,n.jsxs)(t.p,{children:["e.g.",(0,n.jsx)("br",{}),"\nFor the drive ",(0,n.jsx)(t.code,{children:"ata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX1"})," it would be ",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(t.code,{children:"/dev/disk/by-id/ata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX1"})]}),"\n",(0,n.jsx)(t.h2,{id:"add-the-drive-to-your-virtual-machine",children:"Add the Drive to your Virtual Machine"}),"\n",(0,n.jsx)(t.p,{children:"First identify your virtual machines ID - This could easily be found on your Proxmox WebUI. It`s a simple integer that identifies your VM."}),"\n",(0,n.jsxs)(t.p,{children:["e.g.",(0,n.jsx)("br",{}),"\nLet",(0,n.jsx)(t.code,{children:"s assume a VM with the ID "}),"100",(0,n.jsx)(t.code,{children:"To add your drive"}),"ata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX`, all you need to do, is just apply the following command"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"qm set 100 -scsi2 /dev/disk/by-id/ata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX1\nupdate 100 -scsi2 /dev/disk/by-id/ata-WDC_WD40EFPX-68C6CN0_WD-XXXXXXXXXXX1\n"})}),"\n",(0,n.jsx)(t.p,{children:"Or in a more abstract way"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"qm set <VM UID> -scsi2 <drives full path>\n"})}),"\n",(0,n.jsx)(t.p,{children:"et voila - You mounted a phiscal drive directly to your virtual machine."}),"\n",(0,n.jsxs)(t.p,{children:["for this particular example we used the scsi2 driver, but you can also apply other like ",(0,n.jsx)(t.code,{children:"IDE"})," or ",(0,n.jsx)(t.code,{children:"SATA"}),".\nDetails can be found here ",(0,n.jsx)(t.a,{href:"https://pve.proxmox.com/pve-docs/qm.1.html",children:"qm Manual"})," in the section ",(0,n.jsx)(t.code,{children:"qm set"})]})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>d});var s=i(6540);const n={},r=s.createContext(n);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);